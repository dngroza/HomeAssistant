{"version":3,"sources":["webpack:///./src/components/buttons/ha-call-service-button.js","webpack:///./src/components/buttons/ha-progress-button.js","webpack:///./src/common/dom/setup-leaflet-map.js","webpack:///./src/panels/map/ha-entity-marker.js","webpack:///./src/panels/lovelace/common/compute-unused-entities.js","webpack:///./src/panels/lovelace/common/process-config-entities.js","webpack:///./src/common/entity/valid_entity_id.js","webpack:///./src/panels/lovelace/components/hui-entities-toggle.js","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entities.js","webpack:///./src/panels/lovelace/common/create-error-card-config.js","webpack:///./src/panels/lovelace/common/create-entity-row-element.js","webpack:///./src/panels/lovelace/cards/hui-entities-card.js","webpack:///./src/panels/lovelace/cards/hui-entity-filter-card.js","webpack:///./src/panels/lovelace/cards/hui-error-card.js","webpack:///./src/panels/lovelace/cards/hui-glance-card.js","webpack:///./src/panels/lovelace/cards/hui-history-graph-card.js","webpack:///./src/panels/lovelace/common/compute-card-size.js","webpack:///./src/panels/lovelace/cards/hui-horizontal-stack-card.js","webpack:///./src/panels/lovelace/cards/hui-iframe-card.js","webpack:///./src/common/util/debounce.js","webpack:///./src/panels/lovelace/cards/hui-map-card.js","webpack:///./src/panels/lovelace/cards/hui-markdown-card.js","webpack:///./src/panels/lovelace/cards/hui-legacy-wrapper-card.js","webpack:///./src/panels/lovelace/cards/hui-media-control-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-card.js","webpack:///./src/panels/lovelace/common/entity/toggle-entity.js","webpack:///./src/panels/lovelace/common/entity/turn-on-off-entity.js","webpack:///./src/panels/lovelace/cards/hui-picture-elements-card.js","webpack:///./src/panels/lovelace/components/hui-image.js","webpack:///./src/panels/lovelace/common/is-valid-object.js","webpack:///./src/panels/lovelace/cards/hui-picture-entity-card.js","webpack:///./src/panels/lovelace/cards/hui-picture-glance-card.js","webpack:///./src/panels/lovelace/cards/hui-plant-status-card.js","webpack:///./src/panels/lovelace/cards/hui-vertical-stack-card.js","webpack:///./src/panels/lovelace/cards/hui-weather-forecast-card.js","webpack:///./src/panels/lovelace/common/create-card-element.js","webpack:///./src/panels/lovelace/hui-unused-entities.js","webpack:///./src/panels/lovelace/hui-view.js","webpack:///./src/panels/lovelace/hui-root.js","webpack:///./src/common/dom/scroll-to-target.js","webpack:///./src/panels/lovelace/ha-panel-lovelace.js","webpack:///./src/common/dom/load_resource.js"],"names":["HaCallServiceButton","Object","_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_3__","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_1__","_createClass","key","value","this","progress","el","eventData","domain","service","serviceData","hass","callService","then","$","actionSuccess","success","actionError","fire","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_0__","a","_templateObject","type","Boolean","String","customElements","define","HaProgressButton","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_3__","className","classList","container","add","setTimeout","remove","_this2","prototype","__proto__","getPrototypeOf","call","addEventListener","ev","buttonTapped","stopPropagation","tempClass","disabled","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_2__","setupLeafletMap","mapElement","map","leaflet__WEBPACK_IMPORTED_MODULE_0___default","style","document","createElement","setAttribute","parentNode","appendChild","setView","tileLayer","Browser","retina","attribution","subdomains","minZoom","maxZoom","addTo","HaEntityMarker","_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_2__","badgeTap","entityId","_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_1__","entityName","entityPicture","EXCLUDED_DOMAINS","entities","processConfigEntities","Array","isArray","Error","entityConf","index","entity","_typeof","test","hui_entities_toggle_EXCLUDED_DOMAINS","hui_entities_toggle_HuiEntitiesToggle","polymer_element","HuiEntitiesToggle","entityIds","filter","states","includes","split","can_toggle_state","some","common_const","g","state","turnOn","target","checked","arguments","length","domainsToCall","forEach","stateDomain","compute_domain","serviceDomain","push","keys","entity_id","_toggleEntities","html_tag","computed","createErrorConfig","error","origConfig","_createElement","tag","config","stateObj","element","setConfig","err","console","_createErrorElement","message","name","overrideName","hui_entities_card_HuiEntitiesCard","HuiEntitiesCard","_this","_elements","events_mixin","hui_entities_card_createClass","get","hui_entities_card_templateObject","observer","_config","_buildConfig","show","title","show_header_toggle","_configEntities","root","lastChild","removeChild","_loop","create_entity_row_element_typeof","startsWith","substr","whenDefined","fire_event","state_card_type","c","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","return","i","_elements$i","hui_entity_filter_card_HuiEntitiesCard","hui_entity_filter_card_createClass","getCardSize","state_filter","card","assign","createCardElement","_filterRawConfig","_updateCardConfig","tagName","entitiesList","filterState","show_empty","display","isPanel","hui_error_card_HuiErrorCard","hui_error_card_createClass","HuiErrorCard","obj","JSON","stringify","hui_error_card_templateObject","hui_glance_card_HuiGlanceCard","localize_mixin","hui_glance_card_createClass","HuiGlanceCard","item","compute_state_name","compute_state_display","localize","model","hui_glance_card_templateObject","hui_history_graph_card_HuiHistoryGraphCard","hui_history_graph_card_createClass","HuiHistoryGraphCard","cacheKey","hoursToShow","hours_to_show","refresh","refresh_interval","hui_history_graph_card_templateObject","stateHistory","stateHistoryLoading","computeCardSize","hui_horizontal_stack_card_HuiHorizontalStackCard","HuiHorizontalStackCard","hui_horizontal_stack_card_createClass","hui_horizontal_stack_card_templateObject","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getter","size","elSize","cards","elements","hui_iframe_card_HuiIframeCard","hui_iframe_card_createClass","HuiIframeCard","paddingTop","aspect_ratio","offsetHeight","hui_iframe_card_templateObject","debounce","func","wait","immediate","timeout","_len","args","_key","context","callNow","clearTimeout","apply","leaflet_src_default","Icon","Default","imagePath","hui_map_card_HuiMapCard","HuiMapCard","_debouncedResizeListener","_resetMap","bind","hui_map_card_createClass","hui_map_card_templateObject","reflectToAttribute","hui_map_card_get","ar","Math","floor","ResizeObserver","_resizeObserver","observe","window","_map","setup_leaflet_map","_drawEntities","_fitMap","unobserve","removeEventListener","invalidateSize","_mapItems","LatLng","core","latitude","longitude","bounds","latLngBounds","getLatLng","fitBounds","pad","marker","mapItems","_stateObj$attributes","attributes","passive","icon","radius","entity_picture","gpsAccuracy","gps_accuracy","markerIcon","iconHTML","compute_state_domain","outerHTML","divIcon","html","iconSize","interactive","circle","color","part","join","hui_markdown_card_HuiMarkdownCard","hui_markdown_card_createClass","HuiMarkdownCard","content","hui_markdown_card_templateObject","noTitle","LegacyWrapperCard","_tag","toUpperCase","_domain","_element","HTMLElement","_ensureElement","createErrorCardConfig","HuiMediaControlCard","instance","Constructor","TypeError","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","hui_legacy_wrapper_card","hui_picture_card_HuiPictureCard","navigate_mixin","hui_picture_card_createClass","HuiPictureCard","image","navigation_path","navigate","_config$service$split","_config$service$split2","_slicedToArray","service_data","hui_picture_card_templateObject","toggleEntity","VALID_TYPES","Set","hui_picture_elements_card_HuiPictureElementsCard","HuiPictureElementsCard","_stateBadges","_stateIcons","_stateLabels","hui_picture_elements_card_createClass","hui_picture_elements_card_templateObject","invalidTypes","has","img","src","_element$service$spli","_element$service$spli2","hui_picture_elements_card_slicedToArray","innerText","_handleClick","tap_action","prop","setProperty","_hassChanged","_this3","_computeTooltip","toggle","hui_image_HuiImage","hui_image_createClass","HuiImage","hui_image_get","cameraImage","timer","setInterval","_updateCameraImageSrc","clearInterval","stateImage","_imageSrc","setProperties","_error","unavailable","requiredKeys","is_valid_object_typeof","every","k","stateImg","_imageClass","connection","sendMessagePromise","resp","result","content_type","hui_image_templateObject","hui_picture_entity_card_HuiPictureEntityCard","hui_picture_entity_card_createClass","HuiPictureEntityCard","_entityDomain","state_image","camera_image","_oldState","stateLabel","canInteract","_computeStateLabel","show_info","open","hui_picture_entity_card_templateObject","hui_picture_glance_card_HuiPictureGlanceCard","hui_picture_glance_card_createClass","HuiPictureGlanceCard","entitiesService","force_dialog","state_icon","hui_picture_glance_card_templateObject","_entitiesDialog","_entitiesService","HuiPlantStatusCard","hui_vertical_stack_card_HuiVerticalStackCard","HuiVerticalStackCard","hui_vertical_stack_card_createClass","hui_vertical_stack_card_templateObject","totalSize","HuiWeatherForecastCard","CARD_TYPES","create_card_element_CUSTOM_TYPE_PREFIX","create_card_element_createElement","create_card_element_createErrorElement","create_card_element_typeof","hui_unused_entities_HuiUnusedEntities","hui_unused_entities_createClass","HuiUnusedEntities","usedEntities","addEntityId","views","view","addEntities","computeUsedEntities","excluded_entities","sort","hui_unused_entities_templateObject","hui_view_HUIView","HUIView","_debouncedConfigChanged","_configChanged","hui_view_createClass","hui_view_templateObject","columns","Number","cardConfig","columnEntityCount","cardSize","minIndex","val","column","columnEl","apply_themes_on_element","themes","theme","JS_CACHE","hui_root_HUIRoot","hui_root_createClass","HUIRoot","route","path","prefix","id","routeData","parseInt","_curView","_selectView","selected","scroller","animationId","startTime","currentScrollTop","deltaScrollTop","detail","layout","header","scrollTarget","random","Date","now","scrollTop","_currentAnimationId","updateFrame","t","elapsedTime","requestAnimationFrame","viewIndex","background","viewConfig","panel","_loadResources","resources","resource","url","load_resource","b","Promise","resolve","__webpack_require__","_ref","importHref","warn","hui_root_templateObject","narrow","showMenu","ha_panel_lovelace_Lovelace","ha_panel_lovelace_createClass","Lovelace","_fetchConfig","_updateColumns","mqls","width","mql","matchMedia","addListener","matchColumns","reduce","cols","matches","_columns","max","conf","_state","_errorMsg","ha_panel_lovelace_templateObject","_load","reject","attr","onload","onerror","async","rel","d","__webpack_exports__","loadModule","loadJS"],"mappings":"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","file":"50114bd19051da63884e.chunk.js","sourcesContent":["import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport './ha-progress-button.js';\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaCallServiceButton extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <ha-progress-button id=\"progress\" progress=\"[[progress]]\" on-click=\"buttonTapped\"><slot></slot></ha-progress-button>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      domain: {\n        type: String,\n      },\n\n      service: {\n        type: String,\n      },\n\n      serviceData: {\n        type: Object,\n        value: {},\n      },\n    };\n  }\n\n  buttonTapped() {\n    this.progress = true;\n    var el = this;\n    var eventData = {\n      domain: this.domain,\n      service: this.service,\n      serviceData: this.serviceData,\n    };\n\n    this.hass.callService(this.domain, this.service, this.serviceData)\n      .then(function () {\n        el.progress = false;\n        el.$.progress.actionSuccess();\n        eventData.success = true;\n      }, function () {\n        el.progress = false;\n        el.$.progress.actionError();\n        eventData.success = false;\n      }).then(function () {\n        el.fire('hass-service-called', eventData);\n      });\n  }\n}\n\ncustomElements.define('ha-call-service-button', HaCallServiceButton);\n","import '@polymer/paper-button/paper-button.js';\nimport '@polymer/paper-spinner/paper-spinner.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HaProgressButton extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      .container {\n        position: relative;\n        display: inline-block;\n      }\n\n      paper-button {\n        transition: all 1s;\n      }\n\n      .success paper-button {\n        color: white;\n        background-color: var(--google-green-500);\n        transition: none;\n      }\n\n      .error paper-button {\n        color: white;\n        background-color: var(--google-red-500);\n        transition: none;\n      }\n\n      paper-button[disabled] {\n        color: #c8c8c8;\n      }\n\n      .progress {\n        @apply --layout;\n        @apply --layout-center-center;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n      }\n    </style>\n    <div class=\"container\" id=\"container\">\n      <paper-button id=\"button\" disabled=\"[[computeDisabled(disabled, progress)]]\" on-click=\"buttonTapped\">\n        <slot></slot>\n      </paper-button>\n      <template is=\"dom-if\" if=\"[[progress]]\">\n        <div class=\"progress\">\n          <paper-spinner active=\"\"></paper-spinner>\n        </div>\n      </template>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      progress: {\n        type: Boolean,\n        value: false,\n      },\n\n      disabled: {\n        type: Boolean,\n        value: false,\n      },\n    };\n  }\n\n  tempClass(className) {\n    var classList = this.$.container.classList;\n    classList.add(className);\n    setTimeout(() => {\n      classList.remove(className);\n    }, 1000);\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', ev => this.buttonTapped(ev));\n  }\n\n  buttonTapped(ev) {\n    if (this.progress) ev.stopPropagation();\n  }\n\n  actionSuccess() {\n    this.tempClass('success');\n  }\n\n  actionError() {\n    this.tempClass('error');\n  }\n\n  computeDisabled(disabled, progress) {\n    return disabled || progress;\n  }\n}\n\ncustomElements.define('ha-progress-button', HaProgressButton);\n","import Leaflet from 'leaflet';\n\n// Sets up a Leaflet map on the provided DOM element\nexport default function setupLeafletMap(mapElement) {\n  const map = Leaflet.map(mapElement);\n  const style = document.createElement('link');\n  style.setAttribute('href', '/static/images/leaflet/leaflet.css');\n  style.setAttribute('rel', 'stylesheet');\n  mapElement.parentNode.appendChild(style);\n  map.setView([51.505, -0.09], 13);\n  Leaflet.tileLayer(\n    `https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}${Leaflet.Browser.retina ? '@2x.png' : '.png'}`,\n    {\n      attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a>, &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\n      subdomains: 'abcd',\n      minZoom: 0,\n      maxZoom: 20,\n    }\n  ).addTo(map);\n\n  return map;\n}\n","import '@polymer/iron-image/iron-image.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport EventsMixin from '../../mixins/events-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HaEntityMarker extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style include=\"iron-positioning\"></style>\n    <style>\n    .marker {\n      vertical-align: top;\n      position: relative;\n      display: block;\n      margin: 0 auto;\n      width: 2.5em;\n      text-align: center;\n      height: 2.5em;\n      line-height: 2.5em;\n      font-size: 1.5em;\n      border-radius: 50%;\n      border: 0.1em solid var(--ha-marker-color, var(--default-primary-color));\n      color: rgb(76, 76, 76);\n      background-color: white;\n    }\n    iron-image {\n      border-radius: 50%;\n    }\n    </style>\n\n    <div class=\"marker\">\n      <template is=\"dom-if\" if=\"[[entityName]]\">[[entityName]]</template>\n      <template is=\"dom-if\" if=\"[[entityPicture]]\">\n        <iron-image sizing=\"cover\" class=\"fit\" src=\"[[entityPicture]]\"></iron-image>\n      </template>\n    </div>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n      },\n\n      entityId: {\n        type: String,\n        value: '',\n      },\n\n      entityName: {\n        type: String,\n        value: null,\n      },\n\n      entityPicture: {\n        type: String,\n        value: null,\n      }\n    };\n  }\n\n  ready() {\n    super.ready();\n    this.addEventListener('click', ev => this.badgeTap(ev));\n  }\n\n  badgeTap(ev) {\n    ev.stopPropagation();\n    if (this.entityId) {\n      this.fire('hass-more-info', { entityId: this.entityId });\n    }\n  }\n}\n\ncustomElements.define('ha-entity-marker', HaEntityMarker);\n","const EXCLUDED_DOMAINS = [\n  'group',\n  'zone'\n];\n\nfunction computeUsedEntities(config) {\n  const entities = new Set();\n\n  function addEntityId(entity) {\n    entities.add(typeof entity === 'string' ? entity : entity.entity);\n  }\n\n  function addEntities(obj) {\n    if (obj.entity) addEntityId(obj.entity);\n    if (obj.entities) obj.entities.forEach(entity => addEntityId(entity));\n    if (obj.card) addEntities(obj.card);\n    if (obj.cards) obj.cards.forEach(card => addEntities(card));\n  }\n\n  config.views.forEach(view => addEntities(view));\n  return entities;\n}\n\nexport default function computeUnusedEntities(hass, config) {\n  const usedEntities = computeUsedEntities(config);\n  return Object.keys(hass.states).filter(entity => !usedEntities.has(entity) &&\n    !(config.excluded_entities && config.excluded_entities.includes(entity)) &&\n    !EXCLUDED_DOMAINS.includes(entity.split('.', 1)[0])).sort();\n}\n","// Parse array of entity objects from config\nimport isValidEntityId from '../../../common/entity/valid_entity_id.js';\n\nexport default function processConfigEntities(entities) {\n  if (!entities || !Array.isArray(entities)) {\n    throw new Error('Entities need to be an array');\n  }\n\n  return entities.map((entityConf, index) => {\n    if (typeof entityConf === 'string') {\n      entityConf = { entity: entityConf };\n    } else if (typeof entityConf === 'object' && !Array.isArray(entityConf)) {\n      if (!entityConf.entity) {\n        throw new Error(`Entity object at position ${index} is missing entity field.`);\n      }\n    } else {\n      throw new Error(`Invalid entity specified at position ${index}.`);\n    }\n\n    if (!isValidEntityId(entityConf.entity)) {\n      throw new Error(`Invalid entity ID at position ${index}: ${entityConf.entity}`);\n    }\n\n    return entityConf;\n  });\n}\n","export default function validEntityId(entityId) {\n  return /^(\\w+)\\.(\\w+)$/.test(entityId);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-toggle-button/paper-toggle-button.js';\n\nimport canToggleState from '../../../common/entity/can_toggle_state.js';\nimport turnOnOffEntities from '../common/entity/turn-on-off-entities.js';\nimport { STATES_OFF } from '../../../common/const.js';\n\nconst EXCLUDED_DOMAINS = ['cover', 'lock'];\n\nclass HuiEntitiesToggle extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n      :host {\n        width: 38px;\n        display: block;\n      }\n      paper-toggle-button {\n        cursor: pointer;\n        --paper-toggle-button-label-spacing: 0;\n        padding: 13px 5px;\n        margin: -4px -5px;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[_toggleEntities.length]]\">\n      <paper-toggle-button checked=\"[[_computeIsChecked(hass, _toggleEntities)]]\" on-change=\"_callService\"></paper-toggle-button>\n    </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      entities: Array,\n      _toggleEntities: {\n        type: Array,\n        computed: '_computeToggleEntities(hass, entities)'\n      }\n    };\n  }\n\n  _computeToggleEntities(hass, entityIds) {\n    return entityIds.filter(entityId => (entityId in hass.states ?\n      !EXCLUDED_DOMAINS.includes(entityId.split('.', 1)[0]) && canToggleState(hass, hass.states[entityId]) : false));\n  }\n\n  _computeIsChecked(hass, entityIds) {\n    return entityIds.some(entityId => !STATES_OFF.includes(hass.states[entityId].state));\n  }\n\n  _callService(ev) {\n    const turnOn = ev.target.checked;\n    turnOnOffEntities(this.hass, this._toggleEntities, turnOn);\n  }\n}\n\ncustomElements.define('hui-entities-toggle', HuiEntitiesToggle);\n","import { STATES_OFF } from '../../../../common/const.js';\nimport computeDomain from '../../../../common/entity/compute_domain.js';\n\nexport default function turnOnOffEntities(hass, entityIds, turnOn = true) {\n  const domainsToCall = {};\n  entityIds.forEach((entityId) => {\n    if ((STATES_OFF.includes(hass.states[entityId].state)) === turnOn) {\n      const stateDomain = computeDomain(entityId);\n      const serviceDomain = ['cover', 'lock'].includes(stateDomain) ?\n        stateDomain : 'homeassistant';\n\n      if (!(serviceDomain in domainsToCall)) domainsToCall[serviceDomain] = [];\n      domainsToCall[serviceDomain].push(entityId);\n    }\n  });\n\n  Object.keys(domainsToCall).forEach((domain) => {\n    let service;\n    switch (domain) {\n      case 'lock':\n        service = turnOn ? 'unlock' : 'lock';\n        break;\n      case 'cover':\n        service = turnOn ? 'open_cover' : 'close_cover';\n        break;\n      default:\n        service = turnOn ? 'turn_on' : 'turn_off';\n    }\n\n    const entities = domainsToCall[domain];\n    hass.callService(domain, service, { entity_id: entities });\n  });\n}\n","export default function createErrorConfig(error, origConfig) {\n  return {\n    type: 'error',\n    error,\n    origConfig,\n  };\n}\n","import fireEvent from '../../../common/dom/fire_event.js';\n\nimport stateCardType from '../../../common/entity/state_card_type.js';\n\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\n\nfunction _createElement(tag, config, stateObj, hass) {\n  const element = document.createElement(tag);\n  try {\n    if ('setConfig' in element) element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n\n  element.stateObj = stateObj;\n  element.hass = hass;\n  if (config.name) {\n    element.overrideName = config.name;\n  }\n\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createEntityRowElement(config, hass) {\n  let tag;\n\n  if (!config || typeof config !== 'object') {\n    return _createErrorElement('Invalid config given.', config);\n  }\n\n  const entityId = config.entity;\n  if (!(entityId in hass.states)) {\n    return _createErrorElement('Entity not found.', config);\n  }\n\n  const type = config.type || 'default';\n  const stateObj = hass.states[entityId];\n  if (type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config, stateObj, hass);\n    }\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  tag = stateObj ? `state-card-${stateCardType(hass, stateObj)}` : 'state-card-display';\n\n  return _createElement(tag, config, stateObj, hass);\n}\n","import '@polymer/iron-flex-layout/iron-flex-layout-classes.js';\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport processConfigEntities from '../common/process-config-entities.js';\n\nimport '../../../components/ha-card.js';\nimport '../components/hui-entities-toggle.js';\n\n// just importing this now as shortcut to import correct state-card-*\nimport '../../../state-summary/state-card-content.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\n\nimport createEntityRowElement from '../common/create-entity-row-element.js';\nimport { DOMAINS_HIDE_MORE_INFO } from '../../../common/const.js';\nimport computeDomain from '../../../common/entity/compute_domain.js';\n\n/*\n * @appliesMixin EventsMixin\n */\nclass HuiEntitiesCard extends EventsMixin(PolymerElement) {\n  static get template() {\n    return html`\n    <style>\n      ha-card {\n        padding: 16px;\n      }\n      #states {\n        margin: -4px 0;\n      }\n      #states > div {\n        margin: 4px 0;\n      }\n      .header {\n        @apply --paper-font-headline;\n        /* overwriting line-height +8 because entity-toggle can be 40px height,\n           compensating this with reduced padding */\n        line-height: 40px;\n        color: var(--primary-text-color);\n        padding: 4px 0 12px;\n        display: flex;\n        justify-content: space-between;\n      }\n      .header .name {\n        @apply --paper-font-common-nowrap;\n      }\n      .state-card-dialog {\n        cursor: pointer;\n      }\n    </style>\n\n    <ha-card>\n      <template is='dom-if' if='[[_showHeader(_config)]]'>\n        <div class='header'>\n          <div class=\"name\">[[_config.title]]</div>\n          <template is=\"dom-if\" if=\"[[_showHeaderToggle(_config.show_header_toggle)]]\">\n            <hui-entities-toggle hass=\"[[hass]]\" entities=\"[[_config.entities]]\"></hui-entities-toggle>\n          </template>\n        </div>\n      </template>\n      <div id=\"states\"></div>\n    </ha-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      _config: Object,\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    // +1 for the header\n    return 1 + (this._config ? this._config.entities.length : 0);\n  }\n\n  _showHeaderToggle(show) {\n    // If show is undefined, we treat it as true\n    return show !== false;\n  }\n\n  _showHeader(config) {\n    // Show header if either title or toggle configured to show in it\n    return config.title || config.show_header_toggle;\n  }\n\n  setConfig(config) {\n    this._config = config;\n    this._configEntities = processConfigEntities(config.entities);\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const root = this.$.states;\n    const entities = this._configEntities;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    this._elements = [];\n\n    for (const entity of entities) {\n      const entityId = entity.entity;\n\n      const element = createEntityRowElement(entity, this.hass);\n      if (entityId && !DOMAINS_HIDE_MORE_INFO.includes(computeDomain(entityId))) {\n        element.classList.add('state-card-dialog');\n        element.addEventListener('click', () => this.fire('hass-more-info', { entityId }));\n      }\n\n      this._elements.push({ entityId, element });\n      const container = document.createElement('div');\n      container.appendChild(element);\n      root.appendChild(container);\n    }\n  }\n\n  _hassChanged(hass) {\n    for (let i = 0; i < this._elements.length; i++) {\n      const { entityId, element } = this._elements[i];\n      const stateObj = hass.states[entityId];\n      element.stateObj = stateObj;\n      element.hass = hass;\n    }\n  }\n}\n\ncustomElements.define('hui-entities-card', HuiEntitiesCard);\n","import { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport createCardElement from '../common/create-card-element.js';\nimport processConfigEntities from '../common/process-config-entities.js';\n\nfunction getEntities(hass, filterState, entities) {\n  return entities.filter((entityConf) => {\n    const stateObj = hass.states[entityConf.entity];\n    return stateObj && filterState.includes(stateObj.state);\n  });\n}\n\nclass HuiEntitiesCard extends PolymerElement {\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  getCardSize() {\n    return this.lastChild ? this.lastChild.getCardSize() : 1;\n  }\n\n  setConfig(config) {\n    if (!config.state_filter || !Array.isArray(config.state_filter)) {\n      throw new Error('Incorrect filter config.');\n    }\n\n    this._config = config;\n    this._configEntities = processConfigEntities(config.entities);\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    const card = 'card' in config ? Object.assign({}, config.card) : {};\n    if (!card.type) card.type = 'entities';\n    card.entities = [];\n\n    const element = createCardElement(card);\n    element._filterRawConfig = card;\n    this._updateCardConfig(element);\n    element.hass = this.hass;\n    this.appendChild(element);\n  }\n\n  _hassChanged(hass) {\n    const element = this.lastChild;\n    this._updateCardConfig(element);\n    element.hass = hass;\n  }\n\n  _updateCardConfig(element) {\n    if (!element || element.tagName === 'HUI-ERROR-CARD' || !this.hass) return;\n    const entitiesList = getEntities(this.hass, this._config.state_filter, this._configEntities);\n\n    if (entitiesList.length === 0 && this._config.show_empty === false) {\n      this.style.display = 'none';\n      return;\n    }\n\n    this.style.display = 'block';\n    element.setConfig(Object.assign(\n      {},\n      element._filterRawConfig,\n      { entities: entitiesList }\n    ));\n    element.isPanel = this.isPanel;\n  }\n}\ncustomElements.define('hui-entity-filter-card', HuiEntitiesCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HuiErrorCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: block;\n          background-color: red;\n          color: white;\n          padding: 8px;\n        }\n      </style>\n      [[_config.error]]\n      <pre>[[_toStr(_config.origConfig)]]</pre>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n    };\n  }\n\n  setConfig(config) {\n    this._config = config;\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  _toStr(obj) {\n    return JSON.stringify(obj, null, 2);\n  }\n}\n\ncustomElements.define('hui-error-card', HuiErrorCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport processConfigEntities from '../common/process-config-entities';\n\nimport '../../../components/entity/state-badge.js';\nimport '../../../components/ha-card.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n */\nclass HuiGlanceCard extends LocalizeMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          padding: 16px;\n        }\n        ha-card[header] {\n          padding-top: 0;\n        }\n        .entities {\n          padding: 4px 0;\n          display: flex;\n          margin-bottom: -12px;\n          flex-wrap: wrap;\n        }\n        .entity {\n          box-sizing: border-box;\n          padding: 0 4px;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          cursor: pointer;\n          margin-bottom: 12px;\n          width: 20%;\n        }\n        .entity div {\n          width: 100%;\n          text-align: center;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n      </style>\n\n      <ha-card header$=\"[[_config.title]]\">\n        <div class=\"entities\">\n          <template is=\"dom-repeat\" items=\"[[_configEntities]]\">\n            <template is=\"dom-if\" if=\"[[_showEntity(item, hass.states)]]\">\n              <div class=\"entity\" on-click=\"_openDialog\">\n                <div>[[_computeName(item, hass.states)]]</div>\n                <state-badge state-obj=\"[[_computeStateObj(item, hass.states)]]\"></state-badge>\n                <div>[[_computeState(item, hass.states)]]</div>\n              </div>\n            </template>\n          </template>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _configEntities: Array,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    this._config = config;\n    this._configEntities = processConfigEntities(config.entities);\n  }\n\n  _showEntity(item, states) {\n    return item.entity in states;\n  }\n\n  _computeName(item, states) {\n    return item.name || computeStateName(states[item.entity]);\n  }\n\n  _computeStateObj(item, states) {\n    return states[item.entity];\n  }\n\n  _computeState(item, states) {\n    return computeStateDisplay(this.localize, states[item.entity]);\n  }\n\n  _openDialog(ev) {\n    this.fire('hass-more-info', { entityId: ev.model.item.entity });\n  }\n}\n\ncustomElements.define('hui-glance-card', HuiGlanceCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../../../components/state-history-charts.js';\nimport '../../../data/ha-state-history-data.js';\n\nclass HuiHistoryGraphCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          padding: 16px;\n        }\n        ha-card[header] {\n          padding-top: 0;\n        }\n      </style>\n\n      <ha-card header$='[[_config.title]]'>\n        <ha-state-history-data\n          hass=\"[[hass]]\"\n          filter-type=\"recent-entity\"\n          entity-id=\"[[_config.entities]]\"\n          data=\"{{stateHistory}}\"\n          is-loading=\"{{stateHistoryLoading}}\"\n          cache-config=\"[[_computeCacheConfig(_config)]]\"\n        ></ha-state-history-data>\n        <state-history-charts\n          hass=\"[[hass]]\"\n          history-data=\"[[stateHistory]]\"\n          is-loading-data=\"[[stateHistoryLoading]]\"\n          up-to-now\n          no-single\n        ></state-history-charts>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      stateHistory: Object,\n      stateHistoryLoading: Boolean,\n    };\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    if (!config.entities || !Array.isArray(config.entities)) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._config = config;\n  }\n\n  _computeCacheConfig(config) {\n    return {\n      cacheKey: config.entities,\n      hoursToShow: config.hours_to_show || 24,\n      refresh: config.refresh_interval || 0\n    };\n  }\n}\n\ncustomElements.define('hui-history-graph-card', HuiHistoryGraphCard);\n","export default function computeCardSize(element) {\n  return typeof element.getCardSize === 'function' ? element.getCardSize() : 1;\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeCardSize from '../common/compute-card-size.js';\nimport createCardElement from '../common/create-card-element.js';\n\nclass HuiHorizontalStackCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          display: flex;\n        }\n        #root > * {\n          flex: 1 1 0;\n          margin: 0 4px;\n        }\n        #root > *:first-child {\n          margin-left: 0;\n        }\n        #root > *:last-child {\n          margin-right: 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    let size = 1;\n    this._elements.forEach((element) => {\n      const elSize = computeCardSize(element);\n      if (elSize > size) size = elSize;\n    });\n    return size;\n  }\n\n  setConfig(config) {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error('Card config incorrect.');\n    }\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n    this._elements = [];\n    const root = this.$.root;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const elements = [];\n    config.cards.forEach((card) => {\n      const element = createCardElement(card);\n      element.hass = this.hass;\n      elements.push(element);\n      root.appendChild(element);\n    });\n    this._elements = elements;\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-horizontal-stack-card', HuiHorizontalStackCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nclass HuiIframeCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          overflow: hidden;\n        }\n        #root {\n          width: 100%;\n          position: relative;\n        }\n        iframe {\n          border: none;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n      </style>\n      <ha-card header=\"[[_config.title]]\">\n        <div id=\"root\">\n          <iframe src=\"[[_config.url]]\"></iframe>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n    };\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  setConfig(config) {\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n\n    this.$.root.style.paddingTop = config.aspect_ratio || '50%';\n  }\n\n  getCardSize() {\n    return 1 + (this.offsetHeight / 50);\n  }\n}\ncustomElements.define('hui-iframe-card', HuiIframeCard);\n","// From: https://davidwalsh.name/javascript-debounce-function\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport default function debounce(func, wait, immediate) {\n  let timeout;\n  return function (...args) {\n    const context = this;\n    const later = () => {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport Leaflet from 'leaflet';\n\nimport '../../map/ha-entity-marker.js';\n\nimport setupLeafletMap from '../../../common/dom/setup-leaflet-map.js';\nimport processConfigEntities from '../common/process-config-entities.js';\nimport computeStateDomain from '../../../common/entity/compute_state_domain.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport debounce from '../../../common/util/debounce.js';\n\nLeaflet.Icon.Default.imagePath = '/static/images/leaflet';\n\nclass HuiMapCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host([is-panel]) ha-card {\n          left: 0;\n          top: 0;\n          width: 100%;\n          /**\n           * In panel mode we want a full height map. Since parent #view\n           * only sets min-height, we need absolute positioning here\n           */\n          height: 100%;\n          position: absolute;\n        }\n\n        ha-card {\n          overflow: hidden;\n        }\n\n        #map {\n          z-index: 0;\n          border: none;\n          position: absolute;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n        }\n\n        paper-icon-button {\n          position: absolute;\n          top: 75px;\n          left: 7px;\n        }\n\n        #root {\n          position: relative;\n        }\n\n        :host([is-panel]) #root {\n          height: 100%;\n        }\n      </style>\n\n      <ha-card id=\"card\" header=\"[[_config.title]]\">\n        <div id=\"root\">\n          <div id=\"map\"></div>\n          <paper-icon-button\n            on-click=\"_fitMap\"\n            icon=\"hass:image-filter-center-focus\"\n            title=\"Reset focus\"\n          ></paper-icon-button>\n        </div>\n      </ha-card>\n\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_drawEntities'\n      },\n      _config: Object,\n      isPanel: {\n        type: Boolean,\n        reflectToAttribute: true\n      }\n    };\n  }\n\n  constructor() {\n    super();\n    this._debouncedResizeListener = debounce(this._resetMap.bind(this), 100);\n  }\n\n  ready() {\n    super.ready();\n\n    if (!this._config || this.isPanel) {\n      return;\n    }\n\n    this.$.root.style.paddingTop = this._config.aspect_ratio || '100%';\n  }\n\n  setConfig(config) {\n    if (!config) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._configEntities = processConfigEntities(config.entities);\n    this._config = config;\n  }\n\n  getCardSize() {\n    let ar = this._config.aspect_ratio || '100%';\n    ar = ar.substr(0, ar.length - 1);\n    return 1 + Math.floor(ar / 25) || 3;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    // Observe changes to map size and invalidate to prevent broken rendering\n    // Uses ResizeObserver in Chrome, otherwise window resize event\n    if (typeof ResizeObserver === 'function') {\n      this._resizeObserver = new ResizeObserver(() => this._debouncedResizeListener());\n      this._resizeObserver.observe(this.$.map);\n    } else {\n      window.addEventListener('resize', this._debouncedResizeListener);\n    }\n\n    this._map = setupLeafletMap(this.$.map);\n    this._drawEntities(this.hass);\n\n    setTimeout(() => {\n      this._resetMap();\n      this._fitMap();\n    }, 1);\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    if (this._map) {\n      this._map.remove();\n    }\n\n    if (this._resizeObserver) {\n      this._resizeObserver.unobserve(this.$.map);\n    } else {\n      window.removeEventListener('resize', this._debouncedResizeListener);\n    }\n  }\n\n  _resetMap() {\n    if (!this._map) {\n      return;\n    }\n    this._map.invalidateSize();\n  }\n\n  _fitMap() {\n    if (this._mapItems.length === 0) {\n      this._map.setView(\n        new Leaflet.LatLng(this.hass.config.core.latitude, this.hass.config.core.longitude),\n        14\n      );\n    } else {\n      const bounds = new Leaflet.latLngBounds(this._mapItems.map(item => item.getLatLng()));\n      this._map.fitBounds(bounds.pad(0.5));\n    }\n  }\n\n  _drawEntities(hass) {\n    const map = this._map;\n    if (!map) {\n      return;\n    }\n\n    if (this._mapItems) {\n      this._mapItems.forEach(marker => marker.remove());\n    }\n    const mapItems = this._mapItems = [];\n\n    this._configEntities.forEach((entity) => {\n      const entityId = entity.entity;\n      if (!(entityId in hass.states)) {\n        return;\n      }\n      const stateObj = hass.states[entityId];\n      const title = computeStateName(stateObj);\n      const { latitude, longitude, passive, icon, radius,\n        entity_picture: entityPicture, gps_accuracy: gpsAccuracy } = stateObj.attributes;\n\n      if (!(latitude && longitude)) {\n        return;\n      }\n\n      let markerIcon;\n      let iconHTML;\n      let el;\n\n      if (computeStateDomain(stateObj) === 'zone') {\n        // DRAW ZONE\n        if (passive) return;\n\n        // create icon\n        if (icon) {\n          el = document.createElement('ha-icon');\n          el.setAttribute('icon', icon);\n          iconHTML = el.outerHTML;\n        } else {\n          iconHTML = title;\n        }\n\n        markerIcon = Leaflet.divIcon({\n          html: iconHTML,\n          iconSize: [24, 24],\n          className: '',\n        });\n\n        // create market with the icon\n        mapItems.push(Leaflet.marker([latitude, longitude], {\n          icon: markerIcon,\n          interactive: false,\n          title: title,\n        }).addTo(map));\n\n        // create circle around it\n        mapItems.push(Leaflet.circle([latitude, longitude], {\n          interactive: false,\n          color: '#FF9800',\n          radius: radius,\n        }).addTo(map));\n\n        return;\n      }\n\n      // DRAW ENTITY\n      // create icon\n      const entityName = title.split(' ').map(part => part[0]).join('').substr(0, 3);\n\n      el = document.createElement('ha-entity-marker');\n      el.setAttribute('entity-id', entityId);\n      el.setAttribute('entity-name', entityName);\n      el.setAttribute('entity-picture', entityPicture || '');\n\n      /* Leaflet clones this element before adding it to the map. This messes up\n         our Polymer object and we can't pass data through. Thus we hack like this. */\n      markerIcon = Leaflet.divIcon({\n        html: el.outerHTML,\n        iconSize: [48, 48],\n        className: '',\n      });\n\n      // create market with the icon\n      mapItems.push(Leaflet.marker([latitude, longitude], {\n        icon: markerIcon,\n        title: computeStateName(stateObj),\n      }).addTo(map));\n\n      // create circle around if entity has accuracy\n      if (gpsAccuracy) {\n        mapItems.push(Leaflet.circle([latitude, longitude], {\n          interactive: false,\n          color: '#0288D1',\n          radius: gpsAccuracy,\n        }).addTo(map));\n      }\n    });\n  }\n}\n\ncustomElements.define('hui-map-card', HuiMapCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../../../components/ha-markdown.js';\n\nclass HuiMarkdownCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          @apply --paper-font-body1;\n        }\n        ha-markdown {\n          display: block;\n          padding: 0 16px 16px;\n          -ms-user-select: initial;\n          -webkit-user-select: initial;\n          -moz-user-select: initial;\n        }\n        :host([no-title]) ha-markdown {\n          padding-top: 16px;\n        }\n        ha-markdown > *:first-child {\n          margin-top: 0;\n        }\n        ha-markdown > *:last-child {\n          margin-bottom: 0;\n        }\n        ha-markdown a {\n          color: var(--primary-color);\n        }\n        ha-markdown img {\n          max-width: 100%;\n        }\n      </style>\n      <ha-card header=\"[[_config.title]]\">\n        <ha-markdown content='[[_config.content]]'></ha-markdown>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      _config: Object,\n      noTitle: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: '_computeNoTitle(_config.title)',\n      },\n    };\n  }\n\n  setConfig(config) {\n    this._config = config;\n  }\n\n  getCardSize() {\n    return this._config.content.split('\\n').length;\n  }\n\n  _computeNoTitle(title) {\n    return !title;\n  }\n}\n\ncustomElements.define('hui-markdown-card', HuiMarkdownCard);\n","import createErrorCardConfig from '../common/create-error-card-config.js';\nimport computeDomain from '../../../common/entity/compute_domain.js';\n\n\nexport default class LegacyWrapperCard extends HTMLElement {\n  constructor(tag, domain) {\n    super();\n    this._tag = tag.toUpperCase();\n    this._domain = domain;\n    this._element = null;\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error('No entity specified');\n    }\n\n    if (computeDomain(config.entity) !== this._domain) {\n      throw new Error(`Specified entity needs to be of domain ${this._domain}.`);\n    }\n\n    this._config = config;\n  }\n\n  set hass(hass) {\n    const entityId = this._config.entity;\n\n    if (entityId in hass.states) {\n      this._ensureElement(this._tag);\n      this.lastChild.hass = hass;\n      this.lastChild.stateObj = hass.states[entityId];\n    } else {\n      this._ensureElement('HUI-ERROR-CARD');\n      this.lastChild.setConfig(createErrorCardConfig(`No state available for ${entityId}`, this._config));\n    }\n  }\n\n  _ensureElement(tag) {\n    if (this.lastChild && this.lastChild.tagName === tag) return;\n\n    if (this.lastChild) {\n      this.removeChild(this.lastChild);\n    }\n\n    this.appendChild(document.createElement(tag));\n  }\n}\n","import '../../../cards/ha-media_player-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiMediaControlCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-media_player-card', 'media_player');\n  }\n}\n\ncustomElements.define('hui-media-control-card', HuiMediaControlCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\n\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HuiPictureCard extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          overflow: hidden;\n        }\n        ha-card[clickable] {\n          cursor: pointer;\n        }\n        img {\n          display: block;\n          width: 100%;\n        }\n      </style>\n\n      <ha-card on-click=\"_cardClicked\" clickable$='[[_computeClickable(_config)]]'>\n        <img src='[[_config.image]]' />\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.image) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._config = config;\n  }\n\n  _computeClickable(config) {\n    return config.navigation_path || config.service;\n  }\n\n  _cardClicked() {\n    if (this._config.navigation_path) {\n      this.navigate(this._config.navigation_path);\n    }\n    if (this._config.service) {\n      const [domain, service] = this._config.service.split('.', 2);\n      this.hass.callService(domain, service, this._config.service_data);\n    }\n  }\n}\n\ncustomElements.define('hui-picture-card', HuiPictureCard);\n","import { STATES_OFF } from '../../../../common/const.js';\nimport turnOnOffEntity from './turn-on-off-entity.js';\n\nexport default function toggleEntity(hass, entityId) {\n  const turnOn = STATES_OFF.includes(hass.states[entityId].state);\n  turnOnOffEntity(hass, entityId, turnOn);\n}\n","import computeDomain from '../../../../common/entity/compute_domain.js';\n\nexport default function turnOnOffEntity(hass, entityId, turnOn = true) {\n  const stateDomain = computeDomain(entityId);\n  const serviceDomain = stateDomain === 'group' ? 'homeassistant' : stateDomain;\n\n  let service;\n  switch (stateDomain) {\n    case 'lock':\n      service = turnOn ? 'unlock' : 'lock';\n      break;\n    case 'cover':\n      service = turnOn ? 'open_cover' : 'close_cover';\n      break;\n    default:\n      service = turnOn ? 'turn_on' : 'turn_off';\n  }\n\n  hass.callService(serviceDomain, service, { entity_id: entityId });\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/buttons/ha-call-service-button.js';\nimport '../../../components/entity/ha-state-label-badge.js';\nimport '../../../components/entity/state-badge.js';\nimport '../../../components/ha-icon.js';\nimport '../../../components/ha-card.js';\n\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\nconst VALID_TYPES = new Set([\n  'navigation',\n  'service-button',\n  'state-badge',\n  'state-icon',\n  'state-label',\n]);\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HuiPictureElementsCard extends NavigateMixin(EventsMixin(LocalizeMixin(PolymerElement))) {\n  static get template() {\n    return html`\n    <style>\n      ha-card {\n        overflow: hidden;\n      }\n      #root {\n        position: relative;\n        overflow: hidden;\n      }\n      #root img {\n        display: block;\n        width: 100%;\n      }\n      .element {\n        position: absolute;\n        transform: translate(-50%, -50%);\n      }\n      .state-label {\n        padding: 8px;\n        white-space: nowrap;\n      }\n      .clickable {\n        cursor: pointer;\n      }\n      ha-call-service-button {\n        color: var(--primary-color);\n        white-space: nowrap;\n      }\n    </style>\n\n    <ha-card header=\"[[_config.title]]\">\n      <div id=\"root\"></div>\n    </ha-card>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object\n    };\n  }\n\n  constructor() {\n    super();\n    this._stateBadges = [];\n    this._stateIcons = [];\n    this._stateLabels = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    return 4;\n  }\n\n  setConfig(config) {\n    if (!config || !config.image || !Array.isArray(config.elements)) {\n      throw new Error('Invalid card configuration');\n    }\n    const invalidTypes = config.elements.map(el => el.type).filter(el => !VALID_TYPES.has(el));\n    if (invalidTypes.length) {\n      throw new Error(`Incorrect element types: ${invalidTypes.join(', ')}`);\n    }\n\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n    const root = this.$.root;\n\n    this._stateBadges = [];\n    this._stateIcons = [];\n    this._stateLabels = [];\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const img = document.createElement('img');\n    img.src = config.image;\n    root.appendChild(img);\n\n    config.elements.forEach((element) => {\n      const entityId = element.entity;\n      let el;\n      switch (element.type) {\n        case 'service-button':\n          el = document.createElement('ha-call-service-button');\n          [el.domain, el.service] = element.service.split('.', 2);\n          el.serviceData = element.service_data || {};\n          el.innerText = element.title;\n          el.hass = this.hass;\n          break;\n        case 'state-badge':\n          el = document.createElement('ha-state-label-badge');\n          el.state = this.hass.states[entityId];\n          this._stateBadges.push({ el, entityId });\n          break;\n        case 'state-icon':\n          el = document.createElement('state-badge');\n          el.addEventListener('click', () => this._handleClick(entityId, element.tap_action === 'toggle'));\n          el.classList.add('clickable');\n          this._stateIcons.push({ el, entityId });\n          break;\n        case 'state-label':\n          el = document.createElement('div');\n          el.addEventListener('click', () => this._handleClick(entityId, false));\n          el.classList.add('clickable', 'state-label');\n          this._stateLabels.push({ el, entityId });\n          break;\n        case 'navigation':\n          el = document.createElement('ha-icon');\n          el.icon = element.icon || 'hass:image-filter-center-focus';\n          el.addEventListener('click', () => this.navigate(element.navigation_path));\n          el.title = element.navigation_path;\n          el.classList.add('clickable');\n          break;\n      }\n\n      el.classList.add('element');\n      Object.keys(element.style).forEach((prop) => {\n        el.style.setProperty(prop, element.style[prop]);\n      });\n      root.appendChild(el);\n    });\n\n    if (this.hass) {\n      this._hassChanged(this.hass);\n    }\n  }\n\n  _hassChanged(hass) {\n    this._stateBadges.forEach((element) => {\n      const { el, entityId } = element;\n      el.state = hass.states[entityId];\n      el.hass = hass;\n    });\n\n    this._stateIcons.forEach((element) => {\n      const { el, entityId } = element;\n      const stateObj = hass.states[entityId];\n      if (stateObj) {\n        el.stateObj = stateObj;\n        el.title = this._computeTooltip(stateObj);\n      }\n    });\n\n    this._stateLabels.forEach((element) => {\n      const { el, entityId } = element;\n      const stateObj = hass.states[entityId];\n      if (stateObj) {\n        el.innerText = computeStateDisplay(this.localize, stateObj);\n        el.title = this._computeTooltip(stateObj);\n      } else {\n        el.innerText = 'N/A';\n        el.title = '';\n      }\n    });\n  }\n\n  _computeTooltip(stateObj) {\n    return `${computeStateName(stateObj)}: ${computeStateDisplay(this.localize, stateObj)}`;\n  }\n\n  _handleClick(entityId, toggle) {\n    if (toggle) {\n      toggleEntity(this.hass, entityId);\n    } else {\n      this.fire('hass-more-info', { entityId });\n    }\n  }\n}\n\ncustomElements.define('hui-picture-elements-card', HuiPictureElementsCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-toggle-button/paper-toggle-button.js';\n\nimport { STATES_OFF } from '../../../common/const.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport isValidObject from '../common/is-valid-object';\n\nconst UPDATE_INTERVAL = 10000;\n\n/*\n * @appliesMixin LocalizeMixin\n */\nclass HuiImage extends LocalizeMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <style>\n        .state-off {\n          filter: grayscale(100%);\n        } \n        \n        img {\n          display: block;\n          height: auto;\n          transition: filter .2s linear;\n          width: 100%;\n        }\n        \n        .error {\n          width: 100%;\n          height: auto;\n          text-align: center;\n        }\n        \n      </style>\n      \n      <template is=\"dom-if\" if=\"[[_imageSrc]]\">\n        <img \n          src=\"[[_imageSrc]]\" \n          on-error=\"_onImageError\" \n          on-load=\"_onImageLoad\" \n          class$=\"[[_imageClass]]\" />\n      </template>\n      <template is=\"dom-if\" if=\"[[_error]]\">\n        <div class=\"error\">[[localize('ui.card.camera.not_available')]]</div>\n      </template>\n`;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      entity: String,\n      image: String,\n      stateImage: Object,\n      cameraImage: String,\n      _error: {\n        type: Boolean,\n        value: false\n      },\n      _imageClass: String,\n      _imageSrc: String\n    };\n  }\n\n  static get observers() {\n    return ['_configChanged(image, stateImage, cameraImage)'];\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    if (this.cameraImage) {\n      this.timer = setInterval(() => this._updateCameraImageSrc(), UPDATE_INTERVAL);\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n    clearInterval(this.timer);\n  }\n\n  _configChanged(image, stateImage, cameraImage) {\n    if (cameraImage) {\n      this._updateCameraImageSrc();\n    } else if (image && !stateImage) {\n      this._imageSrc = image;\n    }\n  }\n\n  _onImageError() {\n    this.setProperties({\n      _imageSrc: null,\n      _error: true\n    });\n  }\n\n  _onImageLoad() {\n    this._error = false;\n  }\n\n  _hassChanged(hass) {\n    if (this.cameraImage || !this.entity) {\n      return;\n    }\n\n    const state = hass.states[this.entity];\n    const unavailable = !isValidObject(state, ['state']);\n\n    if (!this.stateImage) {\n      this._imageClass = unavailable || STATES_OFF.includes(state.state) ? 'state-off' : '';\n      return;\n    }\n\n    const stateImg = !unavailable ? this.stateImage[state.state] : this.stateImage.unavailable;\n\n    this.setProperties({\n      _imageClass: !stateImg && (unavailable || STATES_OFF.includes(state.state)) ? 'state-off' : '',\n      _imageSrc: stateImg || this.image\n    });\n  }\n\n  _updateCameraImageSrc() {\n    this.hass.connection.sendMessagePromise({\n      type: 'camera_thumbnail',\n      entity_id: this.cameraImage,\n    }).then((resp) => {\n      if (resp.success) {\n        this.setProperties({\n          _imageSrc: `data:${resp.result.content_type};base64, ${resp.result.content}`,\n          _error: false\n        });\n      } else {\n        this.setProperties({\n          _imageSrc: null,\n          _error: true\n        });\n      }\n    });\n  }\n}\n\ncustomElements.define('hui-image', HuiImage);\n","// Check if given obj is a JS object and optionally contains all required keys\nexport default function isValidObject(obj, requiredKeys = []) {\n  return obj && typeof obj === 'object' && !Array.isArray(obj) && requiredKeys.every(k => k in obj);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport '../../../components/ha-card.js';\nimport '../components/hui-image.js';\n\nimport computeDomain from '../../../common/entity/compute_domain.js';\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\n\nconst UNAVAILABLE = 'Unavailable';\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin EventsMixin\n */\nclass HuiPictureEntityCard extends EventsMixin(LocalizeMixin(PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          min-height: 75px;\n          overflow: hidden;\n          position: relative;\n        }\n        ha-card.canInteract {\n          cursor: pointer;\n        }\n        .info {\n          @apply --paper-font-common-nowrap;\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.3);\n          padding: 16px;\n          font-size: 16px;\n          line-height: 16px;\n          color: white;\n          display: flex;\n          justify-content: space-between;\n        }\n        #title {\n          font-weight: 500;\n        }\n        [hidden] {\n          display: none;\n        }\n      </style>\n\n      <ha-card id='card' on-click=\"_cardClicked\">\n        <hui-image\n          hass=\"[[hass]]\"\n          image=\"[[_config.image]]\"\n          state-image=\"[[_config.state_image]]\"\n          camera-image=\"[[_getCameraImage(_config)]]\" \n          entity=\"[[_config.entity]]\"\n        ></hui-image>\n        <div class=\"info\" hidden$='[[_computeHideInfo(_config)]]'>\n          <div id=\"name\"></div>\n          <div id=\"state\"></div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      _config: Object,\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entity) {\n      throw new Error('Error in card configuration.');\n    }\n\n    this._entityDomain = computeDomain(config.entity);\n    if (this._entityDomain !== 'camera' &&\n        (!config.image && !config.state_image && !config.camera_image)) {\n      throw new Error('No image source configured.');\n    }\n\n    this._config = config;\n  }\n\n  _hassChanged(hass) {\n    const config = this._config;\n    const entityId = config.entity;\n    const stateObj = hass.states[entityId];\n\n    // Nothing changed\n    if ((!stateObj && this._oldState === UNAVAILABLE) ||\n        (stateObj && stateObj.state === this._oldState)) {\n      return;\n    }\n\n    let name;\n    let state;\n    let stateLabel;\n    let canInteract = true;\n\n    if (stateObj) {\n      name = config.name || computeStateName(stateObj);\n      state = stateObj.state;\n      stateLabel = this._computeStateLabel(stateObj);\n    } else {\n      name = config.name || entityId;\n      state = UNAVAILABLE;\n      stateLabel = UNAVAILABLE;\n      canInteract = false;\n    }\n\n    this.$.name.innerText = name;\n    this.$.state.innerText = stateLabel;\n    this._oldState = state;\n    this.$.card.classList.toggle('canInteract', canInteract);\n  }\n\n  _computeStateLabel(stateObj) {\n    switch (this._entityDomain) {\n      case 'scene':\n        return this.localize('ui.card.scene.activate');\n      case 'script':\n        return this.localize('ui.card.script.execute');\n      case 'weblink':\n        return 'Open';\n      default:\n        return computeStateDisplay(this.localize, stateObj);\n    }\n  }\n\n  _computeHideInfo(config) {\n    // By default we will show it, so === undefined should be true.\n    return config.show_info === false;\n  }\n\n  _cardClicked() {\n    const entityId = this._config && this._config.entity;\n\n    if (!entityId || !(entityId in this.hass.states)) return;\n\n    if (this._config.tap_action !== 'toggle') {\n      this.fire('hass-more-info', { entityId });\n      return;\n    }\n\n    if (this._entityDomain === 'weblink') {\n      window.open(this.hass.states[entityId].state);\n    } else {\n      toggleEntity(this.hass, entityId);\n    }\n  }\n\n  _getCameraImage(config) {\n    return this._entityDomain === 'camera' ? config.entity : config.camera_image;\n  }\n}\n\ncustomElements.define('hui-picture-entity-card', HuiPictureEntityCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\n\nimport '../../../components/ha-card.js';\nimport '../components/hui-image.js';\n\nimport { STATES_OFF } from '../../../common/const.js';\nimport canToggleState from '../../../common/entity/can_toggle_state.js';\nimport computeStateDisplay from '../../../common/entity/compute_state_display.js';\nimport computeStateName from '../../../common/entity/compute_state_name.js';\nimport stateIcon from '../../../common/entity/state_icon.js';\nimport toggleEntity from '../common/entity/toggle-entity.js';\n\nimport EventsMixin from '../../../mixins/events-mixin.js';\nimport LocalizeMixin from '../../../mixins/localize-mixin.js';\nimport NavigateMixin from '../../../mixins/navigate-mixin.js';\n\n/*\n * @appliesMixin EventsMixin\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n */\nclass HuiPictureGlanceCard extends NavigateMixin(LocalizeMixin(EventsMixin(PolymerElement))) {\n  static get template() {\n    return html`\n      <style>\n        ha-card {\n          position: relative;\n          min-height: 48px;\n          overflow: hidden;\n        }\n        hui-image.clickable {\n          cursor: pointer;\n        }\n        .box {\n          @apply --paper-font-common-nowrap;\n          position: absolute;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: rgba(0, 0, 0, 0.3);\n          padding: 4px 16px;\n          font-size: 16px;\n          line-height: 40px;\n          color: white;\n          display: flex;\n          justify-content: space-between;\n        }\n        .box .title {\n          font-weight: 500;\n        }\n        paper-icon-button, iron-icon {\n          color: #A9A9A9;\n        }\n        paper-icon-button.state-on, iron-icon.state-on {\n          color: white;\n        }\n        iron-icon {\n          padding: 8px;\n        }\n      </style>\n\n      <ha-card>\n        <hui-image\n          class$='[[_computeImageClass(_config)]]'\n          on-click='_handleImageClick'\n          hass=\"[[hass]]\"\n          image=\"[[_config.image]]\"\n          state-image=\"[[_config.state_image]]\"\n          camera-image=\"[[_config.camera_image]]\"\n          entity=\"[[_config.entity]]\"\n        ></hui-image>\n        <div class=\"box\">\n          <div class=\"title\">[[_config.title]]</div>\n          <div>\n            <template is=\"dom-repeat\" items=\"[[_entitiesDialog]]\">\n              <template is=\"dom-if\" if=\"[[_showEntity(item, hass.states)]]\">\n                <paper-icon-button\n                  on-click=\"_openDialog\"\n                  class$=\"[[_computeButtonClass(item, hass.states)]]\"\n                  icon=\"[[_computeIcon(item, hass.states)]]\"\n                  title=\"[[_computeTooltip(item, hass.states)]]\"\n                ></paper-icon-button>\n              </template>\n            </template>\n          </div>\n          <div>\n            <template is=\"dom-repeat\" items=\"[[_entitiesService]]\">\n              <template is=\"dom-if\" if=\"[[_showEntity(item, hass.states)]]\">\n                <paper-icon-button\n                  on-click=\"_callService\"\n                  class$=\"[[_computeButtonClass(item, hass.states)]]\"\n                  icon=\"[[_computeIcon(item, hass.states)]]\"\n                  title=\"[[_computeTooltip(item, hass.states)]]\"\n                ></paper-icon-button>\n              </template>\n            </template>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      _config: Object,\n      _entitiesDialog: {\n        type: Array,\n        computed: '_computeEntitiesDialog(hass, _config, _entitiesService)',\n      },\n      _entitiesService: {\n        type: Array,\n        value: [],\n        computed: '_computeEntitiesService(hass, _config)',\n      },\n    };\n  }\n\n  getCardSize() {\n    return 3;\n  }\n\n  setConfig(config) {\n    if (!config || !config.entities || !Array.isArray(config.entities) ||\n      !(config.image || config.camera_image || config.state_image) ||\n      (config.state_image && !config.entity)) {\n      throw new Error('Invalid card configuration');\n    }\n\n    this._config = config;\n  }\n\n  _computeEntitiesDialog(hass, config, entitiesService) {\n    if (config.force_dialog) {\n      return config.entities;\n    }\n\n    return config.entities.filter(entity => !entitiesService.includes(entity));\n  }\n\n  _computeEntitiesService(hass, config) {\n    if (config.force_dialog) {\n      return [];\n    }\n\n    return config.entities.filter(entity =>\n      canToggleState(this.hass, this.hass.states[entity]));\n  }\n\n  _showEntity(entityId, states) {\n    return entityId in states;\n  }\n\n  _computeIcon(entityId, states) {\n    return stateIcon(states[entityId]);\n  }\n\n  _computeButtonClass(entityId, states) {\n    return STATES_OFF.includes(states[entityId].state) ? '' : 'state-on';\n  }\n\n  _computeTooltip(entityId, states) {\n    return `${computeStateName(states[entityId])}: ${computeStateDisplay(this.localize, states[entityId])}`;\n  }\n\n  _computeImageClass(config) {\n    return config.navigation_path ? 'clickable' : '';\n  }\n\n  _openDialog(ev) {\n    this.fire('hass-more-info', { entityId: ev.model.item });\n  }\n\n  _callService(ev) {\n    const entityId = ev.model.item;\n    toggleEntity(this.hass, entityId);\n  }\n\n  _handleImageClick() {\n    if (!this._config.navigation_path) return;\n    this.navigate(this._config.navigation_path);\n  }\n}\n\ncustomElements.define('hui-picture-glance-card', HuiPictureGlanceCard);\n","import '../../../cards/ha-plant-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiPlantStatusCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-plant-card', 'plant');\n  }\n}\n\ncustomElements.define('hui-plant-status-card', HuiPlantStatusCard);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeCardSize from '../common/compute-card-size.js';\nimport createCardElement from '../common/create-card-element.js';\n\nclass HuiVerticalStackCard extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          display: flex;\n          flex-direction: column;\n        }\n        #root > * {\n          margin: 4px 0 8px 0;\n        }\n        #root > *:first-child {\n          margin-top: 0;\n        }\n        #root > *:last-child {\n          margin-bottom: 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n  }\n\n  ready() {\n    super.ready();\n    if (this._config) this._buildConfig();\n  }\n\n  getCardSize() {\n    let totalSize = 0;\n    this._elements.forEach((element) => {\n      totalSize += computeCardSize(element);\n    });\n    return totalSize;\n  }\n\n  setConfig(config) {\n    if (!config || !config.cards || !Array.isArray(config.cards)) {\n      throw new Error('Card config incorrect');\n    }\n\n    this._config = config;\n    if (this.$) this._buildConfig();\n  }\n\n  _buildConfig() {\n    const config = this._config;\n\n    this._elements = [];\n    const root = this.$.root;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    const elements = [];\n    config.cards.forEach((card) => {\n      const element = createCardElement(card);\n      element.hass = this.hass;\n      elements.push(element);\n      root.appendChild(element);\n    });\n    this._elements = elements;\n  }\n\n  _hassChanged(hass) {\n    this._elements.forEach((element) => {\n      element.hass = hass;\n    });\n  }\n}\n\ncustomElements.define('hui-vertical-stack-card', HuiVerticalStackCard);\n","import '../../../cards/ha-camera-card.js';\n\nimport LegacyWrapperCard from './hui-legacy-wrapper-card.js';\n\nclass HuiWeatherForecastCard extends LegacyWrapperCard {\n  constructor() {\n    super('ha-weather-card', 'weather');\n  }\n\n  getCardSize() {\n    return 4;\n  }\n}\n\ncustomElements.define('hui-weather-forecast-card', HuiWeatherForecastCard);\n","import fireEvent from '../../../common/dom/fire_event.js';\n\nimport '../cards/hui-entities-card.js';\nimport '../cards/hui-entity-filter-card.js';\nimport '../cards/hui-error-card.js';\nimport '../cards/hui-glance-card';\nimport '../cards/hui-history-graph-card.js';\nimport '../cards/hui-horizontal-stack-card.js';\nimport '../cards/hui-iframe-card.js';\nimport '../cards/hui-map-card.js';\nimport '../cards/hui-markdown-card.js';\nimport '../cards/hui-media-control-card.js';\nimport '../cards/hui-picture-card.js';\nimport '../cards/hui-picture-elements-card';\nimport '../cards/hui-picture-entity-card';\nimport '../cards/hui-picture-glance-card';\nimport '../cards/hui-plant-status-card.js';\nimport '../cards/hui-vertical-stack-card.js';\nimport '../cards/hui-weather-forecast-card';\n\nimport createErrorCardConfig from './create-error-card-config.js';\n\nconst CARD_TYPES = [\n  'entities',\n  'entity-filter',\n  'error',\n  'glance',\n  'history-graph',\n  'horizontal-stack',\n  'iframe',\n  'map',\n  'markdown',\n  'media-control',\n  'picture',\n  'picture-elements',\n  'picture-entity',\n  'picture-glance',\n  'plant-status',\n  'vertical-stack',\n  'weather-forecast'\n];\n\nconst CUSTOM_TYPE_PREFIX = 'custom:';\n\nfunction _createElement(tag, config) {\n  const element = document.createElement(tag);\n  try {\n    element.setConfig(config);\n  } catch (err) {\n    // eslint-disable-next-line\n    console.error(tag, err);\n    // eslint-disable-next-line\n    return _createErrorElement(err.message, config);\n  }\n  return element;\n}\n\nfunction _createErrorElement(error, config) {\n  return _createElement('hui-error-card', createErrorCardConfig(error, config));\n}\n\nexport default function createCardElement(config) {\n  let tag;\n\n  if (!config || typeof config !== 'object' || !config.type) {\n    return _createErrorElement('No card type configured.', config);\n  }\n\n  if (config.type.startsWith(CUSTOM_TYPE_PREFIX)) {\n    tag = config.type.substr(CUSTOM_TYPE_PREFIX.length);\n\n    if (customElements.get(tag)) {\n      return _createElement(tag, config);\n    }\n\n    const element = _createErrorElement(`Custom element doesn't exist: ${tag}.`, config);\n\n    customElements.whenDefined(tag)\n      .then(() => fireEvent(element, 'rebuild-view'));\n\n    return element;\n  }\n\n  if (!CARD_TYPES.includes(config.type)) {\n    return _createErrorElement(`Unknown card type encountered: ${config.type}.`, config);\n  }\n\n  return _createElement(`hui-${config.type}-card`, config);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport computeUnusedEntities from './common/compute-unused-entities.js';\nimport createCardElement from './common/create-card-element.js';\n\nimport './cards/hui-entities-card.js';\n\nclass HuiUnusedEntities extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        #root {\n          max-width: 600px;\n          margin: 0 auto;\n          padding: 8px 0;\n        }\n      </style>\n      <div id=\"root\"></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged'\n      },\n      config: {\n        type: Object,\n        observer: '_configChanged'\n      },\n    };\n  }\n\n  _configChanged(config) {\n    const root = this.$.root;\n    if (root.lastChild) root.removeChild(root.lastChild);\n\n    const entities = computeUnusedEntities(this.hass, config);\n    const cardConfig = {\n      type: 'entities',\n      title: 'Unused entities',\n      entities,\n      show_header_toggle: false\n    };\n    const element = createCardElement(cardConfig);\n    element.hass = this.hass;\n    root.appendChild(element);\n  }\n\n  _hassChanged(hass) {\n    const root = this.$.root;\n    if (!root.lastChild) return;\n    root.lastChild.hass = hass;\n  }\n}\ncustomElements.define('hui-unused-entities', HuiUnusedEntities);\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport applyThemesOnElement from '../../common/dom/apply_themes_on_element.js';\nimport debounce from '../../common/util/debounce.js';\n\nimport createCardElement from './common/create-card-element';\n\nclass HUIView extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n      :host {\n        display: block;\n        padding: 4px 4px 0;\n        transform: translateZ(0);\n        position: relative;\n      }\n\n      #columns {\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n      }\n\n      .column {\n        flex-basis: 0;\n        flex-grow: 1;\n        max-width: 500px;\n        overflow-x: hidden;\n      }\n\n      .column > * {\n        display: block;\n        margin: 4px 4px 8px;\n      }\n\n      @media (max-width: 500px) {\n        :host {\n          padding-left: 0;\n          padding-right: 0;\n        }\n\n        .column > * {\n          margin-left: 0;\n          margin-right: 0;\n        }\n      }\n\n      @media (max-width: 599px) {\n        .column {\n          max-width: 600px;\n        }\n      }\n      </style>\n      <div id='columns' on-rebuild-view='_debouncedConfigChanged'></div>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n\n      columns: {\n        type: Number,\n      },\n\n      config: {\n        type: Object,\n      },\n    };\n  }\n\n  static get observers() {\n    return [\n      // Put all properties in 1 observer so we only call configChanged once\n      '_configChanged(columns, config)'\n    ];\n  }\n\n  constructor() {\n    super();\n    this._elements = [];\n    this._debouncedConfigChanged = debounce(this._configChanged, 100);\n  }\n\n  _configChanged() {\n    const root = this.$.columns;\n    const config = this.config;\n\n    while (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    if (!config) {\n      this._elements = [];\n      return;\n    }\n\n    const elements = config.cards.map((cardConfig) => {\n      const element = createCardElement(cardConfig);\n      element.hass = this.hass;\n      return element;\n    });\n\n    let columns = [];\n    const columnEntityCount = [];\n    for (let i = 0; i < this.columns; i++) {\n      columns.push([]);\n      columnEntityCount.push(0);\n    }\n\n    // Find column with < 5 entities, else column with lowest count\n    function getColumnIndex(size) {\n      let minIndex = 0;\n      for (let i = 0; i < columnEntityCount.length; i++) {\n        if (columnEntityCount[i] < 5) {\n          minIndex = i;\n          break;\n        }\n        if (columnEntityCount[i] < columnEntityCount[minIndex]) {\n          minIndex = i;\n        }\n      }\n\n      columnEntityCount[minIndex] += size;\n\n      return minIndex;\n    }\n\n    elements.forEach((el) => {\n      // Trigger custom elements to build up DOM. This is needed for some elements\n      // that use the DOM to decide their height. We don't have to clean this up\n      // because a DOM element can only be in 1 position, so it will be removed from\n      // 'this' and added to the correct column afterwards.\n      this.appendChild(el);\n      const cardSize = typeof el.getCardSize === 'function' ? el.getCardSize() : 1;\n      columns[getColumnIndex(cardSize)].push(el);\n    });\n\n    // Remove empty columns\n    columns = columns.filter(val => val.length > 0);\n\n    columns.forEach((column) => {\n      const columnEl = document.createElement('div');\n      columnEl.classList.add('column');\n      column.forEach(el => columnEl.appendChild(el));\n      root.appendChild(columnEl);\n    });\n\n    this._elements = elements;\n\n    if ('theme' in config) {\n      applyThemesOnElement(root, this.hass.themes, config.theme);\n    }\n  }\n\n  _hassChanged(hass) {\n    for (let i = 0; i < this._elements.length; i++) {\n      this._elements[i].hass = hass;\n    }\n  }\n}\n\ncustomElements.define('hui-view', HUIView);\n","import '@polymer/app-layout/app-header-layout/app-header-layout.js';\nimport '@polymer/app-layout/app-header/app-header.js';\nimport '@polymer/app-layout/app-toolbar/app-toolbar.js';\nimport '@polymer/app-route/app-route.js';\nimport '@polymer/paper-icon-button/paper-icon-button.js';\nimport '@polymer/paper-item/paper-item.js';\nimport '@polymer/paper-listbox/paper-listbox.js';\nimport '@polymer/paper-menu-button/paper-menu-button.js';\nimport '@polymer/paper-tabs/paper-tab.js';\nimport '@polymer/paper-tabs/paper-tabs.js';\n\nimport { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\n\nimport scrollToTarget from '../../common/dom/scroll-to-target.js';\n\nimport EventsMixin from '../../mixins/events-mixin.js';\nimport NavigateMixin from '../../mixins/navigate-mixin.js';\n\nimport '../../layouts/ha-app-layout.js';\nimport '../../components/ha-start-voice-button.js';\nimport '../../components/ha-icon.js';\nimport { loadModule, loadJS } from '../../common/dom/load_resource.js';\nimport './hui-unused-entities.js';\nimport './hui-view.js';\n\nimport createCardElement from './common/create-card-element.js';\n\n// JS should only be imported once. Modules and HTML are safe.\nconst JS_CACHE = {};\n\nclass HUIRoot extends NavigateMixin(EventsMixin(PolymerElement)) {\n  static get template() {\n    return html`\n    <style include='ha-style'>\n      :host {\n        -ms-user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n      }\n\n      ha-app-layout {\n        min-height: 100%;\n      }\n      paper-tabs {\n        margin-left: 12px;\n        --paper-tabs-selection-bar-color: var(--text-primary-color, #FFF);\n        text-transform: uppercase;\n      }\n      app-toolbar a {\n        color: var(--text-primary-color, white);\n      }\n      #view {\n        min-height: calc(100vh - 112px);\n        /**\n         * Since we only set min-height, if child nodes need percentage\n         * heights they must use absolute positioning so we need relative\n         * positioning here.\n         *\n         * https://www.w3.org/TR/CSS2/visudet.html#the-height-property\n         */\n        position: relative;\n      }\n      #view.tabs-hidden {\n        min-height: calc(100vh - 64px);\n      }\n      paper-item {\n        cursor: pointer;\n      }\n    </style>\n    <app-route route=\"[[route]]\" pattern=\"/:view\" data=\"{{routeData}}\"></app-route>\n    <ha-app-layout id=\"layout\">\n      <app-header slot=\"header\" fixed>\n        <app-toolbar>\n          <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n          <div main-title>[[_computeTitle(config)]]</div>\n          <ha-start-voice-button hass=\"[[hass]]\"></ha-start-voice-button>\n          <paper-menu-button\n            no-animations\n            horizontal-align=\"right\"\n            horizontal-offset=\"-5\"\n          >\n            <paper-icon-button icon=\"hass:dots-vertical\" slot=\"dropdown-trigger\"></paper-icon-button>\n            <paper-listbox on-iron-select=\"_deselect\" slot=\"dropdown-content\">\n              <paper-item on-click=\"_handleRefresh\">Refresh</paper-item>\n              <paper-item on-click=\"_handleUnusedEntities\">Unused entities</paper-item>\n              <paper-item on-click=\"_handleHelp\">Help</paper-item>\n            </paper-listbox>\n          </paper-menu-button>\n        </app-toolbar>\n\n        <div sticky hidden$=\"[[_computeTabsHidden(config.views)]]\">\n          <paper-tabs scrollable selected=\"[[_curView]]\" on-iron-activate=\"_handleViewSelected\">\n            <template is=\"dom-repeat\" items=\"[[config.views]]\">\n              <paper-tab>\n                <template is=\"dom-if\" if=\"[[item.icon]]\">\n                  <ha-icon title$=\"[[item.title]]\" icon=\"[[item.icon]]\"></ha-icon>\n                </template>\n                <template is=\"dom-if\" if=\"[[!item.icon]]\">\n                  [[_computeTabTitle(item.title)]]\n                </template>\n              </paper-tab>\n            </template>\n          </paper-tabs>\n        </div>\n      </app-header>\n\n      <div id='view'></div>\n    </app-header-layout>\n    `;\n  }\n\n  static get properties() {\n    return {\n      narrow: Boolean,\n      showMenu: Boolean,\n      hass: {\n        type: Object,\n        observer: '_hassChanged',\n      },\n      config: {\n        type: Object,\n        observer: '_configChanged',\n      },\n      columns: {\n        type: Number,\n        observer: '_columnsChanged',\n      },\n\n      _curView: {\n        type: Number,\n        value: 0,\n      },\n\n      route: {\n        type: Object,\n        observer: '_routeChanged'\n      },\n      routeData: Object\n    };\n  }\n\n  _routeChanged(route) {\n    const views = this.config && this.config.views;\n    if (route.path === '' && route.prefix === '/lovelace' && views) {\n      this.navigate(`/lovelace/${views[0].id || 0}`, true);\n    } else if (this.routeData.view) {\n      const view = this.routeData.view;\n      let index = 0;\n      for (let i = 0; i < views.length; i++) {\n        if (views[i].id === view || i === parseInt(view)) {\n          index = i;\n          break;\n        }\n      }\n      if (index !== this._curView) this._selectView(index);\n    }\n  }\n\n  _computeViewId(id, index) {\n    return id || index;\n  }\n\n  _computeTitle(config) {\n    return config.title || 'Home Assistant';\n  }\n\n  _computeTabsHidden(views) {\n    return views.length < 2;\n  }\n\n  _computeTabTitle(title) {\n    return title || 'Unnamed view';\n  }\n\n  _handleRefresh() {\n    this.fire('config-refresh');\n  }\n\n  _handleUnusedEntities() {\n    this._selectView('unused');\n  }\n\n  _deselect(ev) {\n    ev.target.selected = null;\n  }\n\n  _handleHelp() {\n    window.open('https://developers.home-assistant.io/docs/en/lovelace_index.html', '_blank');\n  }\n\n  _handleViewSelected(ev) {\n    const index = ev.detail.selected;\n    if (index !== this._curView) {\n      const id = this.config.views[index].id || index;\n      this.navigate(`/lovelace/${id}`);\n    }\n    scrollToTarget(this, this.$.layout.header.scrollTarget);\n  }\n\n  _selectView(viewIndex) {\n    this._curView = viewIndex;\n\n    // Recreate a new element to clear the applied themes.\n    const root = this.$.view;\n    if (root.lastChild) {\n      root.removeChild(root.lastChild);\n    }\n\n    let view;\n    let background = this.config.background || '';\n\n    if (viewIndex === 'unused') {\n      view = document.createElement('hui-unused-entities');\n      view.config = this.config;\n    } else {\n      const viewConfig = this.config.views[this._curView];\n      if (viewConfig.panel) {\n        view = createCardElement(viewConfig.cards[0]);\n        view.isPanel = true;\n      } else {\n        view = document.createElement('hui-view');\n        view.config = viewConfig;\n        view.columns = this.columns;\n      }\n      if (viewConfig.background) background = viewConfig.background;\n    }\n\n    this.$.view.style.background = background;\n\n    view.hass = this.hass;\n    root.appendChild(view);\n  }\n\n  _hassChanged(hass) {\n    if (!this.$.view.lastChild) return;\n    this.$.view.lastChild.hass = hass;\n  }\n\n  _configChanged(config) {\n    this._loadResources(config.resources || []);\n    // On config change, recreate the view from scratch.\n    this._selectView(this._curView);\n    this.$.view.classList.toggle('tabs-hidden', config.views.length < 2);\n  }\n\n  _columnsChanged(columns) {\n    if (!this.$.view.lastChild) return;\n    this.$.view.lastChild.columns = columns;\n  }\n\n  _loadResources(resources) {\n    resources.forEach((resource) => {\n      switch (resource.type) {\n        case 'js':\n          if (resource.url in JS_CACHE) break;\n          JS_CACHE[resource.url] = loadJS(resource.url);\n          break;\n\n        case 'module':\n          loadModule(resource.url);\n          break;\n\n        case 'html':\n          import(/* webpackChunkName: \"import-href-polyfill\" */ '../../resources/html-import/import-href.js')\n            .then(({ importHref }) => importHref(resource.url));\n          break;\n\n        default:\n          // eslint-disable-next-line\n          console.warn('Unknown resource type specified: ${resource.type}');\n      }\n    });\n  }\n}\n\ncustomElements.define('hui-root', HUIRoot);\n","/**\n * Scroll to a specific y coordinate.\n *\n * Copied from paper-scroll-header-panel.\n *\n * @method scroll\n * @param {number} top The coordinate to scroll to, along the y-axis.\n * @param {boolean} smooth true if the scroll position should be smoothly adjusted.\n */\nexport default function scrollToTarget(element, target) {\n  // the scroll event will trigger _updateScrollState directly,\n  // However, _updateScrollState relies on the previous `scrollTop` to update the states.\n  // Calling _updateScrollState will ensure that the states are synced correctly.\n  var top = 0;\n  var scroller = target;\n  var easingFn = function easeOutQuad(t, b, c, d) {\n    /* eslint-disable no-param-reassign, space-infix-ops, no-mixed-operators */\n    t /= d;\n    return -c * t*(t-2) + b;\n    /* eslint-enable no-param-reassign, space-infix-ops, no-mixed-operators */\n  };\n  var animationId = Math.random();\n  var duration = 200;\n  var startTime = Date.now();\n  var currentScrollTop = scroller.scrollTop;\n  var deltaScrollTop = top - currentScrollTop;\n  element._currentAnimationId = animationId;\n  (function updateFrame() {\n    var now = Date.now();\n    var elapsedTime = now - startTime;\n    if (elapsedTime > duration) {\n      scroller.scrollTop = top;\n    } else if (element._currentAnimationId === animationId) {\n      scroller.scrollTop = easingFn(elapsedTime, currentScrollTop, deltaScrollTop, duration);\n      requestAnimationFrame(updateFrame.bind(element));\n    }\n  }).call(element);\n}\n","import { html } from '@polymer/polymer/lib/utils/html-tag.js';\nimport { PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport '@polymer/paper-button/paper-button.js';\n\nimport '../../layouts/hass-loading-screen.js';\nimport '../../layouts/hass-error-screen.js';\nimport './hui-root.js';\n\nclass Lovelace extends PolymerElement {\n  static get template() {\n    return html`\n      <style>\n        paper-button {\n          color: var(--primary-color);\n          font-weight: 500;\n        }\n      </style>\n      <template is='dom-if' if='[[_equal(_state, \"loaded\")]]' restamp>\n        <hui-root\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n          hass='[[hass]]'\n          route=\"[[route]]\"\n          config='[[_config]]'\n          columns='[[_columns]]'\n          on-config-refresh='_fetchConfig'\n        ></hui-root>\n      </template>\n      <template is='dom-if' if='[[_equal(_state, \"loading\")]]' restamp>\n        <hass-loading-screen\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n        ></hass-loading-screen>\n      </template>\n      <template is='dom-if' if='[[_equal(_state, \"error\")]]' restamp>\n        <hass-error-screen\n          title='Lovelace'\n          error='[[_errorMsg]]'\n          narrow=\"[[narrow]]\"\n          show-menu=\"[[showMenu]]\"\n        >\n          <paper-button on-click=\"_fetchConfig\">Reload ui-lovelace.yaml</paper-button>\n        </hass-error-screen>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n\n      narrow: {\n        type: Boolean,\n        value: false,\n      },\n\n      showMenu: {\n        type: Boolean,\n        value: false,\n      },\n\n      route: Object,\n\n      _columns: {\n        type: Number,\n        value: 1,\n      },\n\n      _state: {\n        type: String,\n        value: 'loading',\n      },\n\n      _errorMsg: String,\n\n      _config: {\n        type: Object,\n        value: null,\n      },\n    };\n  }\n\n  static get observers() {\n    return ['_updateColumns(narrow, showMenu)'];\n  }\n\n  ready() {\n    this._fetchConfig();\n    this._updateColumns = this._updateColumns.bind(this);\n    this.mqls = [300, 600, 900, 1200].map((width) => {\n      const mql = matchMedia(`(min-width: ${width}px)`);\n      mql.addListener(this._updateColumns);\n      return mql;\n    });\n    this._updateColumns();\n    super.ready();\n  }\n\n  _updateColumns() {\n    const matchColumns = this.mqls.reduce((cols, mql) => cols + mql.matches, 0);\n    // Do -1 column if the menu is docked and open\n    this._columns = Math.max(1, matchColumns - (!this.narrow && this.showMenu));\n  }\n\n  _fetchConfig() {\n    this.hass.connection.sendMessagePromise({ type: 'frontend/lovelace_config' })\n      .then(\n        conf => this.setProperties({\n          _config: conf.result,\n          _state: 'loaded',\n        }),\n        err => this.setProperties({\n          _state: 'error',\n          _errorMsg: err.message,\n        })\n      );\n  }\n\n  _equal(a, b) {\n    return a === b;\n  }\n}\n\ncustomElements.define('ha-panel-lovelace', Lovelace);\n","// Load a resource and get a promise when loading done.\n// From: https://davidwalsh.name/javascript-loader\n\nfunction _load(tag, url, type) {\n  // This promise will be used by Promise.all to determine success or failure\n  return new Promise(function (resolve, reject) {\n    const element = document.createElement(tag);\n    let attr = 'src';\n    let parent = 'body';\n\n    // Important success and error for the promise\n    element.onload = () => resolve(url);\n    element.onerror = () => reject(url);\n\n    // Need to set different attributes depending on tag type\n    switch (tag) {\n      case 'script':\n        element.async = true;\n        if (type) {\n          element.type = type;\n        }\n        break;\n      case 'link':\n        element.type = 'text/css';\n        element.rel = 'stylesheet';\n        attr = 'href';\n        parent = 'head';\n    }\n\n    // Inject into document to kick off loading\n    element[attr] = url;\n    document[parent].appendChild(element);\n  });\n}\n\nexport const loadCSS = url => _load('link', url);\nexport const loadJS = url => _load('script', url);\nexport const loadImg = url => _load('img', url);\nexport const loadModule = url => _load('script', url, 'module');\n"],"sourceRoot":""}